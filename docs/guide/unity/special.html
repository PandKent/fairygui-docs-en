
<!DOCTYPE html>
<html lang="en">
    <head>
    
        <title>FairyGUI - Special</title>
    
        <meta charset="utf-8">
        <meta name="description" content="FairyGUI Docs">
        <meta name="keywords" content="FairyGUI,FGUI,FairyGUI Docs">
        
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <meta property="og:type" content="article">
        <meta property="og:title" content="-SpecialFairyGUI">
        <meta property="og:description" content="FairyGUI Docs">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Special — FairyGUI">
        <meta name="twitter:description" content="FairyGUI Docs">

      <!--  <link href='//fonts.proxy.ustclug.org/css?family=Source+Sans+Pro:300,400,600|Roboto Mono' rel='stylesheet' type='text/css'> -->

        <!-- main page styles -->
        <link rel="stylesheet" href="/docs/css/page.css">

        <!-- this needs to be loaded before guide's inline scripts -->
        <script src="/docs/js/vue.min.js"></script>
        <script>window.PAGE_TYPE = "guide_unity"</script>
    </head>
    <body class="docs">        <div id="mobile-bar"  data-bg-text="FairyGUI" >
            <a class="menu-button"></a>
        </div>
        <div id="header">
  <ul id="nav">
    <li><a href="/docs/guide/" class="nav-link current">Manual</a></li>
<li><a href="/docs/examples/" class="nav-link">Examples</a></li>
<li><a href="/docs/release_notes/" class="nav-link">Release Notes</a></li>
<li><a href="/" class="nav-link">Home</a></li>
  </ul>
</div>

        
            <div id="main" class="fix-sidebar">
                
                    
    <div class="sidebar">
    <ul class="main-menu">
        <li><a href="/docs/guide/" class="nav-link current">Manual</a></li>
<li><a href="/docs/examples/" class="nav-link">Examples</a></li>
<li><a href="/docs/release_notes/" class="nav-link">Release Notes</a></li>
<li><a href="/" class="nav-link">Home</a></li>
    </ul>
    <div class="list">
        <ul class="menu-root">
            

	 			
	                
	                <li>
	                    <a href="/docs/guide/index.html" class="sidebar-link">Getting Start</a>
	                </li>
	            
	
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/index.html" class="sidebar-link">Basis</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/project_settings.html" class="sidebar-link">Project Settings</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/package.html" class="sidebar-link">Package</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/branch.html" class="sidebar-link">Branch</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/publish.html" class="sidebar-link">Publish</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/object.html" class="sidebar-link">Object</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/image.html" class="sidebar-link">Image</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/movieclip.html" class="sidebar-link">MovieClip</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/graph.html" class="sidebar-link">Graph</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/loader.html" class="sidebar-link">Loader</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/text.html" class="sidebar-link">Text</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/richtext.html" class="sidebar-link">Rich Text</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/group.html" class="sidebar-link">Group</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/component.html" class="sidebar-link">Component</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/scrollpane.html" class="sidebar-link">ScrollPane</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/controller.html" class="sidebar-link">Controller</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/relation.html" class="sidebar-link">Relation</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/label.html" class="sidebar-link">Label</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/button.html" class="sidebar-link">Button</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/combobox.html" class="sidebar-link">ComboBox</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/progressbar.html" class="sidebar-link">ProgressBar</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/slider.html" class="sidebar-link">Slider</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/scrollbar.html" class="sidebar-link">ScrollBar</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/list.html" class="sidebar-link">List</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/tree.html" class="sidebar-link">Tree</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/popup.html" class="sidebar-link">Popup</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/dragdrop.html" class="sidebar-link">Drag&Drop</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/window.html" class="sidebar-link">Window</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/transition.html" class="sidebar-link">Transition</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/adaptation.html" class="sidebar-link">Adaptation</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/i18n.html" class="sidebar-link">i18n</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/export.html" class="sidebar-link">Import/Export</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/preference.html" class="sidebar-link">Preference</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/plugin.html" class="sidebar-link">Plugin</a>
	                </li>
	            
	
	            
	                
	                
	                <li><h3>SDK</h3></li>
	                
	                <li>
	                    <a href="/docs/guide/sdk/laya.html" class="sidebar-link">LayaAir</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/sdk/egret.html" class="sidebar-link">Egret</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/sdk/cocos2dx.html" class="sidebar-link">Cocos2dx</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/sdk/creator.html" class="sidebar-link">Cocos Creator</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/sdk/cryengine.html" class="sidebar-link">Cry Engine</a>
	                </li>
	            

	            
	                
	                
	                <li><h3>SDK - Unity</h3></li>
	                
	                <li>
	                    <a href="/docs/guide/unity/index.html" class="sidebar-link">Basis</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/transform.html" class="sidebar-link">Transform</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/atlas.html" class="sidebar-link">Atlas</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/font.html" class="sidebar-link">Fonts</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/input.html" class="sidebar-link">Input</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/event.html" class="sidebar-link">Event</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/insert3d.html" class="sidebar-link">Insert 3D</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/uipainter.html" class="sidebar-link">Curved UI</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/drawcall.html" class="sidebar-link">DrawCall</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/lua.html" class="sidebar-link">Lua</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/special.html" class="sidebar-link current">Special</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/faq.html" class="sidebar-link">FAQ</a>
	                </li>
	            

            
        </ul>
    </div>
</div>


<div class="content guide_unity with-sidebar ">
    
      <h1>Special</h1>
    
    <h2 id="PaintMode"><a href="#PaintMode" class="headerlink" title="PaintMode"></a>PaintMode</h2><p>FairyGUI can make a display object enter<code>Painting mode</code>In simple terms, the target object is drawn on a texture, and then the texture can be manipulated to achieve some special effects. The following functions all rely on this model:</p>
<ul>
<li>The BlendMode of the component is not the default value “Normal”.</li>
<li>Use arbitrary filters on components;</li>
<li>Use blur filters on arbitrary objects;</li>
<li>Component is tilted;</li>
<li>The 2D simulation 3D perspective function is used, that is, GObject.perspective = true;</li>
<li>Curved UI</li>
</ul>
<p>The painting mode feature relies on an additional camera and two layers that are specifically defined. Camera is<strong>Automatic generated</strong>Yes, the name is CaptureCamera, you don’t need to access and manipulate it. The names of the two layers are<figure class="highlight plain"><figcaption><span>和 Hidden FUNNY`If these two layers are not defined in Unity, a warning will appear:</span></figcaption><table><tr><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p>
<p>Please define two layers named ‘VUI’ and ‘Hidden VUI’ “<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"></div><div class="line">At this point you should add them to the Layer definition to avoid this warning. These two Layers can be freely defined to the unused layer serial number (the default is 30 and 31), but pay attention to the Culling Mask of all cameras (except CaptureCamera, which is automatic, regardless of)**Not choose**These two layers.</div><div class="line"></div><div class="line">In addition to the functions mentioned above, the object will enter the painting mode, and it can also be triggered manually by calling the API:</div><div class="line"></div><div class="line">```csharp</div><div class="line">// Enter painting mode</div><div class="line">    EnterPaintingMode (int requestorId, Margin? margin);</div><div class="line"></div><div class="line">    // Leave painting mode</div><div class="line">    LeavePaintingMode (int requestorId);</div></pre></td></tr></table></figure></p>
<ul>
<li><code>requestorId</code>Requester id. When multiple requests require the display object to enter painting mode, this id can be used to distinguish. The values are 1, 2, 4, 8, 16 and so on. Internal hold within 1024. The user-defined id starts from 1024.</li>
<li><code>margin</code>Leave blank around the texture. If the content after special processing is larger than the original content, then the setting here can make the texture larger.</li>
</ul>
<p><strong>If the target object uses a custom mask, additional settings are required to display properly.</strong></p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line">UIConfig.depthSupportForPaitingMode = <span class="literal">true</span>;</div></pre></td></tr></table></figure>
<h2 id="Component-screenshot"><a href="#Component-screenshot" class="headerlink" title="Component screenshot"></a>Component screenshot</h2><p>Use the following methods to achieve the function of screenshots of components. The principle is provided by FairyGUI<code>Painting mode</code>Features.</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line">GObject aObject;</div><div class="line">    DisplayObject dObject = aObject.displayObject;</div><div class="line">    dObject.EnterPaintingMode (<span class="number">1024</span>, <span class="literal">null</span>);</div><div class="line"></div><div class="line">    <span class="comment">// The texture will not be updated until this frame is rendered, so the code that accesses the texture needs to be delayed until the next frame is executed.</span></div><div class="line">    <span class="keyword">yield</span> <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line"></div><div class="line">    RenderTexture tex = (RenderTexture) dObject.paintingGraphics.texture.nativeTexture;</div><div class="line">    <span class="comment">// After getting tex, you can use Unity's method to save as an image or do other processing. The specific treatment is omitted.</span></div><div class="line"></div><div class="line">    <span class="comment">// End the painting mode after the processing ends. The id must correspond to the Enter method.</span></div><div class="line">    dObject.LeavePaintingMode (<span class="number">1024</span>);</div></pre></td></tr></table></figure>
<h2 id="Emoji-display-and-input"><a href="#Emoji-display-and-input" class="headerlink" title="Emoji display and input"></a>Emoji display and input</h2><p>FairyGUI supports emoticon display and direct input, that is, the emoticon image is displayed in the input box directly in the input state. It supports input on the PC and also supports input from the phone’s native keyboard. E.g:</p>
<p><img src="../../images/20170924151030.png" alt=""></p>
<p>The usage method is to define the emojies collection for rich text or input text.</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line">Dictionay &lt;<span class="keyword">uint</span>, Emoji&gt; emojies = <span class="keyword">new</span> Dictionary &lt;<span class="keyword">uint</span>, Emoji&gt; ();</div><div class="line">    <span class="comment">// unicodeValue is the unicode encoding of the character, imageURL is the image path</span></div><div class="line">    emojies.Add (unicodeValue, <span class="keyword">new</span> Emoji (imageURL));</div><div class="line"></div><div class="line">    GRichTextField richTextField;</div><div class="line">    richTextField.emojies = emojies;</div><div class="line"></div><div class="line">    GTextInput textInput;</div><div class="line">    textInput.emojies = emojies;</div></pre></td></tr></table></figure>
<p>Each expression corresponds to a Unicode encoding. There are two types of expressions, one is a custom expression, and the other is the expression that comes with the phone’s keyboard.</p>
<p>For a custom expression, you can use any character as the code for the expression, and you can select some characters that are hardly input by the user directly.</p>
<p>For expressions on the keyboard of mobile phones, UCS32 encoding is generally used, that is, 4-byte Unicode encoding. This is different from the UTF8 or UCS16 we usually use. Generally, the characters we use in the code, whether English or Chinese, can be expressed using a char, but the 4-byte Unicode encoding requires two char expressions in C #, which is called Surrogate Pair. Losing any char will cause encoding errors.</p>
<p>For example, the expression corresponding to the Unicode encoding 0x1f600 is:<img src="../../images/20170924153658.png" alt=""></p>
<p>Register this expression:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line">emojies.Add(<span class="number">0x1f600</span>, <span class="keyword">new</span> Emoji(<span class="string">"ui://Emojies/1f600"</span>));</div></pre></td></tr></table></figure>
<p>Common Unicode encoding and emoji image resources on IOS can be downloaded from here:<a href="http://res.fairygui.com/ios-emoji.zip" title="ios-emoji.zip" target="_blank" rel="external">http://res.fairygui.com/ios-emoji.zip</a></p>
<p>It should be noted that the Unicode encoding of 0x1f600 is expressed by two chars in C #, that is, “\ U0001f600”, but it does not mean that the integer values of these two chars are 0x1 and 0xf600. If you need to transfer text or database storage to UCS32 encoded text, you need to ensure that your network layer or database interface supports this encoding. You can get the detailed processing method of this encoding in Baidu. The keyword is “ios emoticon encoding”.</p>
<p>The text component that comes with UGUI has no processing of expressions, so Unity blocks the input of expressions. If you want to turn on this function, you need to modify the /Classes/UI/Keyboard.mm file in the Xcode project and change the FILTER_EMOJIS_IOS_KEYBOARD macro to 0.</p>
<h2 id="Arabic-language-text-display"><a href="#Arabic-language-text-display" class="headerlink" title="Arabic language text display"></a>Arabic language text display</h2><p>FairyGUI supports Arabic language text display from right to left. If you need to turn on this function and use the source version, you need to add RTL_TEXT_SUPPORT in the Scripting Define Symbols of Unity Player Settings; if you use the DLL version, please compile the DLL that contains this function yourself, or ask the owner</p>
<p><img src="../../images/20180319022527.png" alt=""></p>
<h2 id="UI-Automation-Test"><a href="#UI-Automation-Test" class="headerlink" title="UI Automation Test"></a>UI Automation Test</h2><p>FairyGUI provides automated testing tools<a href="http://airtest.netease.com/" target="_blank" rel="external">AirTest</a>SDK for easy access to automated testing. <a href="https://github.com/AirtestProject/Poco-SDK/tree/master/Unity3D" target="_blank" rel="external"></a>You can download it from here. Please pay attention to fill in FAIRYGUI_TEST in Scripting Define Symbols when using.</p>

    
    <div class="footer">
      found mistake? Want to participate in editing?
      <a href="https://github.com/fairygui/en.fairygui.io/tree/master/src/guide/unity/special.md" target="_blank">
        Edit this page on Github!
      </a>
    </div>
</div>

                
            </div>
            <script src="/docs/js/smooth-scroll.min.js"></script>
        

        <!-- main custom script for sidebars, version selects etc. -->        
        <script src="/docs/js/css.escape.js"></script>
        <script src="/docs/js/common.js"></script>
    </body>
</html>
